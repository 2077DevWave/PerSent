# PerSent پرسنت

[![English](https://img.shields.io/badge/English-انگلیسی-blue.svg)](README.md)

![1743009344748](https://github.com/user-attachments/assets/6bb1633b-6ed3-47fa-aae2-f97886dc4e22)

## مقدمه
پرسنت PerSent به عنوان یک کتابخانه کاربردی برای زبان پایتون نوشته شده که به کاربران در زمینه تحلیل احساسات زبان فارسی کمک میکنه. PerSent مخفف Persian Sentiment Analyzer هست که تصمیم گرفتم این اسم رو بر این اساس براش انتخاب کنم. این کتابخانه در حال حاضر خیلی ابزار نداره و در مراحل تست اولیه قرار داره و نسخه آماده استفاده اون در [Pypi]() هم انتشار داده شده که میتونید با دستور زیر اون رو برای خودتون نصب و آماده استفاده کنید :
``` bash
pip install PerSent
```
استفاده ای که در حال حاضر داره تحلیل احساسات نظرات هست. میتونید یک دیدگاه رو از منظر احساس کاربر نسبت به خرید یا خدمات تحلیل کنید (recommended / not recommended / no idea) 
میتونید هم روی یک نظر به تنهایی و هم روی مجموعه ای از نظرات درون فایل  csv تحلیل رو انجام بدید. خروجی روی ترمینال نمایش داده میشه و اگه ورودی به صورت مجموعه ای باشه روی یک فایل csv دیگه به همراه خلاصه ای از نتایج کلی ذخیره میشه . ریپازیتوری که اون رو به این کتابخانه تبدیل کردم:


[کلیک کنید](https://github.com/RezaGooner/Sentiment-Survey-Analyzer)


کتابخانه نیاز داره تا توسط کاربران تست بشه و باگ های خودش را توی مراحل استفاده نشون بده. اگر هنگام استفاده از اون به مشکل یا باگی خوردید ، حس کردید تغییری میتونه اون رو بهبوده ببخشه یا پیشنهادی نسبت به تغییر جایی از کتابخانه داشتید حتما اون رو با من در میون بذارید :

- [مشارکت](#مشارکت)


  همچنین به دلیل استفاده شدن از کتابخانه hazm در این پروژه ، چون نیاز به هماهنگی بین نسخه های بخش های مختلف مثل mingw-w64 و ... هست، اگه توی نصب هر بخشی مشکل داشتید و نتونستید بخش های مورد نیاز رو همگام کنید از پلتفرم های آنلاین مثل ```DeepNote.com``` استفاده کنید.

## نصب 
برای نصب کتابخانه میتونید مثل نصب کتابخانه های دیگه از دستور pip استفاده کنید :
``` bash
pip install PerSent
```
اگر هم خواستید نسخه خاصی از اون رو نصب کنید از دستور زیر استفاده کنید :
```bash
pip install PerSent==<VERSION_NUMBER>
```
به جای $$<VERSION_NUMBER>$$ نسخه مورد نیاز رو وارد کنید.

## استفاده 
بعد از نصب موفق کتابخانه حالا آماده استفاده از اون میشیم . ابتدا میخوایم یه نظر رو به تنهایی تحلیل احساسات کنیم.
``` bash
from PerSent import CommentAnalyzer

# ایجاد نمونه شی از کلاس
analyzer = CommentAnalyzer()

'''
 آموزش مدل (اگر داده دارید)

میتوانید یک مجموعه داده csv حاوی دو ستون نظرات و وضعیت پیشنهاد را به مدل بدهید تا آموزش لازم را ببیند و در استفاده های بعدی مورد استفاده قرار دهد
وضعیت پیشنهاد باید شامل سه مقدار زیر باشد :
1 recommended
2 not_recommended
3 no_idea
'''
analyzer.train("train.csv")

#  بارگذاری مدل از پیش آموزش دیده
analyzer.load_model()

# پیش‌بینی متن
text = "کیفیت عالی داشت"
result = analyzer.predict(text)
print(f"احساس متن: {result}")

# خروجی: احساس متن: recommended
```
برای بخش یادگیری، روی یک مجموعه داده آموزش انجام دادم و مدلی رو با دقت حدودی 70 درصد آماده کردم. چون سخت افرار لازم رو نداشتم نتونستم مدلی رو با مجموعه داده بزرگتر آموزش بدم. اگه بستر لازم برای این کار رو دارید میتونید از مجموعه داده ای که آماده کردم (یا هر مدل مناسب دیگه ای که دارید) استفاده کنید و مدل مناسبی رو آموزش بدید و چه خوب که اون رو با من به اشتراک بگذارید تا اون رو همراه کتابخانه انتشار بدم. به دلیل حجیم بودن مجموعه داده اون رو تقسیم کردم و شما باید rar ها رو دانلود و اکسترکت کنید تا به فایل اصلی دسترسی پیدا کنید :
[کلیک کنید](https://github.com/RezaGooner/Sentiment-Survey-Analyzer/tree/main/Dataset/big_train)

---

حالا میخوایم یک سری نظرات رو که توی یک فایل csv قرار داره تحلیل کنیم. شکل کلی تابع به این صورت هست :
``` bash
csvPredict(input_csv, output_path, summary_path=None, text_column=0)
```
که مسیر خلاصه (summary_path) و ستون نظرات (text_column) اختیاری هستند. 
برای مثال ما میخوایم یک فایل csv تک ستونه رو تحلیل کنیم :
``` bash
from PerSent import CommentAnalyzer
# نمونه‌سازی تحلیلگر
analyzer = CommentAnalyzer()
analyzer.load_model()

# تحلیل فایل 
analyzer.csvPredict(
    input_csv="comments.csv",
    output_path="resultsss.csv"
)
```
نظرات در مسیر input_csv قرار داره و نتیجه پردازش در مسیر output_path قرار میگیره. اگر لازم بود خلاصه ای از پردازش و تحلیل هم داشته باشید باید آرگومان summary_path رو مقداردهی کنید. 
خلاصه یک فایل csv شامل موارد زیر هست :

1. تعداد نظرات پیشنهاد دهنده (recommended)
2. تعداد نظرات پیشنهاد نداده (not_recommended)
3. تعداد نظرات بدون ایده (no_idea)
4. تعداد کل نظرات
5. دقت مدل (که توی این نسخه محاسبه نمیشه)


برای حالت های دیگه :
``` bash
from PerSent import CommentAnalyzer

# نمونه‌سازی تحلیلگر
analyzer = CommentAnalyzer()
analyzer.load_model()

# روش‌های مختلف فراخوانی تابع:

# 1. استفاده از اندیس ستون (شمارش از 0)
analyzer.csvPredict("comments.csv", "results.csv", None , 0)  # ستون اول

# 2. استفاده از اندیس منفی (شمارش از آخر)
analyzer.csvPredict("comments.csv", "results.csv", None , -1)  # ستون آخر

# 3. استفاده از نام ستون
analyzer.csvPredict("comments.csv", "results.csv", None , "نظرات") # ستون با سرستون نظرات

# 4. استفاده از خلاصه سازی بدون مشخص کردن ستون (فایل تک ستون)
analyzer.csvPredict("comments.csv", "results.csv" , "summary_path.csv")

# 5. استفاده از خلاصه سازی به همراه مشخص کردن ستون
analyzer.csvPredict("comments.csv", "results.csv" , "summary_path.csv", 2)

```


## مشارکت

همونظور که گفتم این کتابخانه نیاز به همکاری و مشارکت کاربران داره. پیشنهاد ، باگ یا هر نظری نسبت به پروژه دارید رو از راه های زیر با من در میون بگذارید:

- [Fork Repository & Pull Request](https://github.com/RezaGooner/PerSent/fork)
- [Make Issue](https://github.com/RezaGooner/PerSent/issues/new)
- E-Mail : ```RezaAsadiProgrammer@gmail.com```
- Telegram : ```@RezaGooner```
